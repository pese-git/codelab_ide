# CodeLab Terminal

–ü–∞–∫–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –¥–ª—è CodeLab IDE. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —ç–º—É–ª—è—Ç–æ—Ä —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π PTY, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–µ—Ä–µ–∑ BLoC.

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 21 —è–Ω–≤–∞—Ä—è 2026

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–≠–º—É–ª—è—Ü–∏—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:**
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —ç–º—É–ª—è—Ç–æ—Ä —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ xterm
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ANSI escape codes
- –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥
- –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ/–≤—Å—Ç–∞–≤–∫–∞

**PTY –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**
- –ü—Å–µ–≤–¥–æ—Ç–µ—Ä–º–∏–Ω–∞–ª (PTY) –¥–ª—è –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ (Ctrl+C, Ctrl+D)
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:**
- BLoC pattern –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–º
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ —Å–µ—Å—Å–∏–∏
- –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞

**–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å:**
- Windows (—á–µ—Ä–µ–∑ flutter_pty)
- macOS (—á–µ—Ä–µ–∑ flutter_pty)
- Linux (—á–µ—Ä–µ–∑ flutter_pty)

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
lib/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ widgets/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ terminal_widget.dart    # –û—Å–Ω–æ–≤–Ω–æ–π –≤–∏–¥–∂–µ—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ terminal_bloc.dart      # BLoC –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
‚îÇ   ‚îî‚îÄ‚îÄ codelab_terminal_base.dart  # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã
‚îî‚îÄ‚îÄ codelab_terminal.dart           # –ü—É–±–ª–∏—á–Ω—ã–π API
```

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```yaml
dependencies:
  flutter:
    sdk: flutter
  
  # –≠–º—É–ª—è—Ü–∏—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
  xterm: ^4.0.0
  
  # PTY –ø–æ–¥–¥–µ—Ä–∂–∫–∞
  flutter_pty: ^0.4.2
  
  # State management
  flutter_bloc: ^9.1.1
  bloc: ^9.1.0
  
  # –¶–≤–µ—Ç–∞ ANSI
  ansicolor: ^2.0.3
  
  # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  logger: ^2.6.2
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```dart
import 'package:codelab_terminal/codelab_terminal.dart';

class TerminalPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return BlocProvider(
      create: (context) => TerminalBloc(),
      child: TerminalWidget(),
    );
  }
}
```

### –° –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

```dart
import 'package:codelab_terminal/codelab_terminal.dart';
import 'package:xterm/xterm.dart';

class CustomTerminalPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return BlocProvider(
      create: (context) => TerminalBloc(
        initialDirectory: '/path/to/project',
        shell: '/bin/zsh',  // –ö–∞—Å—Ç–æ–º–Ω—ã–π shell
      ),
      child: TerminalWidget(
        theme: TerminalTheme(
          cursor: Color(0xFF00FF00),
          selection: Color(0xFF3366FF),
          foreground: Color(0xFFFFFFFF),
          background: Color(0xFF1E1E1E),
        ),
      ),
    );
  }
}
```

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ

```dart
import 'package:codelab_terminal/codelab_terminal.dart';

// –ü–æ–ª—É—á–∏—Ç—å BLoC
final terminalBloc = context.read<TerminalBloc>();

// –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
terminalBloc.add(TerminalEvent.executeCommand('ls -la'));

// –û—á–∏—Å—Ç–∏—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª
terminalBloc.add(TerminalEvent.clear());

// –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
terminalBloc.add(TerminalEvent.changeDirectory('/new/path'));
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

```dart
BlocListener<TerminalBloc, TerminalState>(
  listener: (context, state) {
    state.when(
      idle: () => print('–¢–µ—Ä–º–∏–Ω–∞–ª –≥–æ—Ç–æ–≤'),
      executing: (command) => print('–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è: $command'),
      completed: (exitCode) => print('–ó–∞–≤–µ—Ä—à–µ–Ω–æ —Å –∫–æ–¥–æ–º: $exitCode'),
      error: (message) => print('–û—à–∏–±–∫–∞: $message'),
    );
  },
  child: TerminalWidget(),
)
```

## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –¢–µ–º—ã —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

```dart
// –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
final lightTheme = TerminalTheme(
  cursor: Colors.black,
  selection: Colors.blue.withOpacity(0.3),
  foreground: Colors.black,
  background: Colors.white,
  black: Colors.black,
  red: Colors.red,
  green: Colors.green,
  yellow: Colors.yellow,
  blue: Colors.blue,
  magenta: Colors.purple,
  cyan: Colors.cyan,
  white: Colors.white,
);

// –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
final darkTheme = TerminalTheme(
  cursor: Color(0xFF00FF00),
  selection: Color(0xFF3366FF),
  foreground: Color(0xFFFFFFFF),
  background: Color(0xFF1E1E1E),
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞
);
```

### –†–∞–∑–º–µ—Ä –∏ —à—Ä–∏—Ñ—Ç

```dart
TerminalWidget(
  style: TerminalStyle(
    fontSize: 14.0,
    fontFamily: 'Courier New',
    lineHeight: 1.2,
  ),
)
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PTY

```dart
TerminalBloc(
  ptyConfig: PtyConfig(
    executable: '/bin/bash',  // Shell –¥–ª—è –∑–∞–ø—É—Å–∫–∞
    arguments: ['-l'],         // –ê—Ä–≥—É–º–µ–Ω—Ç—ã shell
    environment: {             // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
      'TERM': 'xterm-256color',
      'COLORTERM': 'truecolor',
    },
    workingDirectory: '/home/user',
  ),
)
```

### –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥

```dart
TerminalBloc(
  historySize: 1000,  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –∏—Å—Ç–æ—Ä–∏–∏
  saveHistory: true,  // –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
)
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
flutter test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
flutter test test/terminal_bloc_test.dart

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å coverage
flutter test --coverage
```

## üìö API Reference

### TerminalBloc

#### –°–æ–±—ã—Ç–∏—è

```dart
sealed class TerminalEvent {
  const factory TerminalEvent.executeCommand(String command) = ExecuteCommand;
  const factory TerminalEvent.clear() = ClearTerminal;
  const factory TerminalEvent.changeDirectory(String path) = ChangeDirectory;
  const factory TerminalEvent.resize(int cols, int rows) = ResizeTerminal;
  const factory TerminalEvent.sendInput(String input) = SendInput;
}
```

#### –°–æ—Å—Ç–æ—è–Ω–∏—è

```dart
sealed class TerminalState {
  const factory TerminalState.idle() = Idle;
  const factory TerminalState.executing(String command) = Executing;
  const factory TerminalState.completed(int exitCode) = Completed;
  const factory TerminalState.error(String message) = Error;
}
```

### TerminalWidget

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `theme` | `TerminalTheme?` | –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ |
| `style` | `TerminalStyle?` | –°—Ç–∏–ª—å —à—Ä–∏—Ñ—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä—ã |
| `readOnly` | `bool` | –¢–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false) |
| `autofocus` | `bool` | –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true) |

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã

```dart
class TerminalBloc extends Bloc<TerminalEvent, TerminalState> {
  void _onExecuteCommand(ExecuteCommand event, Emitter<TerminalState> emit) {
    final command = event.command;
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
    if (command == 'clear') {
      _terminal.clear();
      emit(const TerminalState.idle());
      return;
    }
    
    // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ PTY
    _pty.write(utf8.encode('$command\n'));
    emit(TerminalState.executing(command));
  }
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–≤–æ–¥–∞ PTY

```dart
_pty.output.listen((data) {
  // –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
  final text = utf8.decode(data);
  
  // –ó–∞–ø–∏—Å–∞—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª
  _terminal.write(text);
  
  // –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  emit(const TerminalState.idle());
});
```

## üîç –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º

```dart
class IDEPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        Expanded(
          flex: 2,
          child: CodeEditor(),
        ),
        Expanded(
          flex: 1,
          child: TerminalWidget(),
        ),
      ],
    );
  }
}
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω–∞–ª—ã

```dart
class MultiTerminalPage extends StatefulWidget {
  @override
  State<MultiTerminalPage> createState() => _MultiTerminalPageState();
}

class _MultiTerminalPageState extends State<MultiTerminalPage> {
  final List<TerminalBloc> _terminals = [];
  int _activeIndex = 0;
  
  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        // –í–∫–ª–∞–¥–∫–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤
        Row(
          children: _terminals.asMap().entries.map((entry) {
            return Tab(
              text: 'Terminal ${entry.key + 1}',
              isActive: entry.key == _activeIndex,
              onTap: () => setState(() => _activeIndex = entry.key),
            );
          }).toList(),
        ),
        // –ê–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª
        Expanded(
          child: BlocProvider.value(
            value: _terminals[_activeIndex],
            child: TerminalWidget(),
          ),
        ),
      ],
    );
  }
}
```

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- –ù–∞ Windows –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏
- Emoji –º–æ–≥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —à—Ä–∏—Ñ—Ç–∞
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ/–≤—Å—Ç–∞–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é

## üó∫Ô∏è Roadmap

### v1.1 (Q1 2026)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ split —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤
- [ ] –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Unicode
- [ ] –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ (Ctrl+C, Ctrl+V)

### v1.2 (Q2 2026)
- [ ] –ü–æ–∏—Å–∫ –ø–æ –≤—ã–≤–æ–¥—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤—ã–≤–æ–¥–∞ –≤ —Ñ–∞–π–ª
- [ ] –ü—Ä–æ—Ñ–∏–ª–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. [`../../LICENSE`](../../LICENSE)
